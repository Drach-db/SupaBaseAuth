<!-- index.html – готовая «одностраничка» логина с Supabase  -->
<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Login • Marketel</title>

<!-- шрифт, цвета и углы подогнаны под стили marketel.app -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
<style>
  :root{
    --bg:#f5f3ef;          /* бежевый фон сайта                */
    --panel:#ffffff;       /* карточка / панели                 */
    --text:#0e1e24;        /* основной тёмный текст             */
    --accent:#ff5722;      /* фирменный оранжевый (#ff5722)     */
    --border:#d4d3d0;      /* тонкая серая рамка                */
    --r:.75rem;            /* общий скруглённый радиус          */
  }
  *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,sans-serif;color:var(--text);}
  body{display:flex;align-items:center;justify-content:center;min-height:100vh;background:var(--bg);padding:1.5rem;}
  .card{width:100%;max-width:420px;background:var(--panel);border:1px solid var(--border);border-radius:var(--r);padding:2.25rem;box-shadow:0 6px 16px rgba(0,0,0,.04);}
  h1{font-size:1.75rem;font-weight:600;margin-bottom:1.25rem;}
  label{display:block;font-size:.875rem;margin-bottom:.35rem;}
  input{width:100%;padding:.65rem .9rem;font-size:1rem;border:1px solid var(--border);border-radius:var(--r);margin-bottom:1rem;}
  input:focus{border-color:var(--accent);outline:0;box-shadow:0 0 0 2px rgba(255,87,34,.18);}
  button{width:100%;padding:.75rem 1rem;font-size:1rem;font-weight:600;background:var(--accent);color:#fff;border:0;border-radius:var(--r);cursor:pointer;transition:background .15s;}
  button:disabled{opacity:.5;cursor:progress;}
  button:hover:not(:disabled){background:#e14d1f;}
  .msg{margin-top:.85rem;min-height:1.2rem;font-size:.9rem;}
</style>

<body>
  <main class="card">
    <h1>Вход</h1>

    <label for="email">Email</label>
    <input id="email" type="email" placeholder="you@company.com" autocomplete="email">

    <label for="pass">Password</label>
    <input id="pass" type="password" placeholder="••••••••" autocomplete="current-password">

    <button id="login">Sign&nbsp;in</button>
    <div id="msg" class="msg"></div>
  </main>

  <!-- Supabase JS (UMD) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script>
    /* ---------- 1. Подставьте СВОИ ключи проекта Supabase ---------- */
    const SUPABASE_URL = "https://qebyuwquhsayswaakqgi.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFlYnl1d3F1aHNheXN3YWFrcWdpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg5MTg5MDAsImV4cCI6MjA2NDQ5NDkwMH0.HoSFbD6A7NJcjpCYJ7kXBIzXPjPBITE0uJhblDRlvcE";

    /* ---------- 2. Инициализация клиента ---------- */
    const sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY, {
      auth: { persistSession: false }
    });

    /* ---------- 3. Утилиты ---------- */
    const $ = id => document.getElementById(id);
    const show = (text, ok=false) => {
      $("msg").style.color = ok ? "green" : "var(--accent)";
      $("msg").textContent = text;
    };

    /* ---------- 4. Обработчик кнопки ---------- */
    $("login").addEventListener("click", async () => {
      const email = $("email").value.trim();
      const pass  = $("pass").value;

      /* --- валидация --- */
      if (!email) { $("email").focus(); show("Please enter your email"); return; }
      if (!pass)  { $("pass").focus();  show("Please enter your password"); return; }

      $("login").disabled = true;
      show("Signing in…", true);
      try {
        const { error } = await sb.auth.signInWithPassword({ email, password: pass });
        if (error) {
          show(error.message || "Invalid credentials");
        } else {
          show("Success! Redirecting…", true);
          /* ---------- 5. Куда вести после входа ---------- */
          location.href = "https://marketel.appsmith.com/app/hubstaff-dashboard/public-hubstaff-activities-68418c8b6a626865613a3537?environment=production";
        }
      } catch (err) {
        console.error(err);
        show("Network error, try again");
      }
      $("login").disabled = false;
    });

    /* ---------- 6. ENTER = нажать кнопку ---------- */
    ["email","pass"].forEach(id=>{
      $(id).addEventListener("keyup",e=>{
        if (e.key==="Enter") $("login").click();
      });
    });
  </script>
</body>
</html>