<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Login • Marketel</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />

<style>
  :root{--bg:#f5f3ef;--panel:#fff;--text:#0e1e24;--accent:#ff5722;--border:#d4d3d0;--r:.75rem}
  *{box-sizing:border-box;font-family:Inter,sans-serif;margin:0;padding:0;color:var(--text)}
  body{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--bg);padding:1.5rem}
  .card{max-width:420px;width:100%;background:var(--panel);border:1px solid var(--border);border-radius:var(--r);padding:2.25rem}
  h1{font-size:1.75rem;margin-bottom:1.25rem}
  label{display:block;font-size:.875rem;margin-bottom:.35rem}
  input{width:100%;padding:.65rem .9rem;margin-bottom:1rem;font-size:1rem;border:1px solid var(--border);border-radius:var(--r)}
  input:focus{border-color:var(--accent);outline:0;box-shadow:0 0 0 2px rgba(255,87,34,.15)}
  button{width:100%;padding:.75rem 1rem;font-size:1rem;font-weight:600;background:var(--accent);color:#fff;border:0;border-radius:var(--r);cursor:pointer;transition:.2s}
  button:disabled{opacity:.6;cursor:progress}
  .msg{margin-top:1rem;height:1.25rem;font-size:.875rem;color:var(--accent)}
</style>

<body>
  <main class="card">
    <h1>Вход</h1>
    <label>Email</label><input id="email" type="email" autocomplete="email" placeholder="you@company.com">
    <label>Password</label><input id="pass" type="password" autocomplete="current-password" placeholder="••••••••">
    <button id="login">Sign&nbsp;in</button>
    <div id="msg" class="msg"></div>
  </main>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
<script>
/* ---------- 1. ваши ключи Supabase ---------- */
const SUPABASE_URL = "https://YOUR-PROJECT.supabase.co";
const SUPABASE_KEY = "YOUR_PUBLIC_ANON_KEY";

/* ---------- 2. инициализация ---------- */
const sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY, {auth:{persistSession:false}});

const $ = id => document.getElementById(id);
const show = (txt, ok=false)=>{ $("msg").style.color = ok? "green" : "var(--accent)"; $("msg").textContent = txt };

$("login").addEventListener("click", async () => {
  const email = $("email").value.trim();
  const pass  = $("pass").value;

  /* --- валидация полей --- */
  if(!email){ $("email").focus(); show("Please enter your email"); return }
  if(!pass){ $("pass").focus(); show("Please enter your password"); return }

  /* --- запрос --- */
  $("login").disabled = true;
  try{
    const { error } = await sb.auth.signInWithPassword({ email, password:pass });
    if(error){ console.error(error); show(error.message) }
    else{
      show("Success! Redirecting…", true);
      location.href = "https://marketel.appsmith.com/app/hubstaff-dashboard";
    }
  }catch(err){ console.error(err); show("Network error") }
  $("login").disabled = false;
});
</script>
</body>
</html>